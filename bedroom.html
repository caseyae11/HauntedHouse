<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>huntHouse</title>

    <!-- zimjs.com - JavaScript Canvas Framework -->
    <script type="module">
      import zim from "https://zimjs.org/cdn/015/zim_game";
      const assets = [
        "girlWorry.png",
        "livingRoom.png",
        "lava1.png",
        "lava2.png",
        "lava3.png",
        "m1.png",
        "m2.png",
        "m3.png",
        "m4.png",
        "m5.png",
        "m6.png",
        "heart.png",
        "Layer 1.png",
        "Layer 2.png",
        "bgp.png",
        "Layer 3.png",
        "Layer 4.png",
        "Layer 5.png",
        "heart.png",
        "wardrobe.png",
        "underbed.png",
        "bgp3.png",
        // "audio.mp3",
        "https://fonts.googleapis.com/css2?family=Tomorrow&display=swap",

      ];

      
      const path = "assets/";

      // See Docs under Frame for FIT, FILL, FULL, and TAG
      new Frame(FIT, 1024, 768, darker, darker, ready, assets, path);
      function ready() {

        // const sound = new Aud({
        //       file: "audio.mp3",
        //       delay: 0.25,
        //       loop: true,
        //     }).play();


        let bgp = new Pic("bgp.png", W).center();

        

        let marshmallowCounter = 0;
        //const heartcont = new Container(320, 50).loc(672, 25);
        //let heartrect = new Rectangle (320, 50, blue).loc(672, 25);
        let heart = new Pic("heart.png").loc(672, 34);
        let heartT = new Tile(heart, 6, 1, 60).resize().sca(0.3).loc(672, 34);
        let container = new Container(W, H).sca(0.7, 0.8).centerReg();
        let livingroom = new Pic("bedroom.png").center(container);
        let livingroomFrame = new Rectangle(
          1000,
          600,
          null,
          lighter,
          1,
          20
        ).centerReg();
        let mask1 = container.setMask(livingroomFrame);

        
        const layer1 = new Pic("Layer 1.png").loc(703, 175).alp(0.01).addTo(container);
        let wardrobeFrame

        layer1.on("click", ()=>{
            const wardcont = new Container(460, 530).centerReg(container);
            const wardrobe =  new Pic("wardrobe.png").centerReg(wardcont).sca(0.65)
            wardrobeFrame = new Rectangle(
            460,
            530,
            null,
            orange,
            1,
            20
            ).centerReg();
            wardrobe.setMask(wardrobeFrame);
            m6.alp(0.5)
            bgp.alp(0.1)
            livingroom.alp(0.5);

            const m1 = new Pic("m1.png").pos(435, 435).sca(0.12).addTo(wardcont); 
                   
            m1.tap(()=>{
                m1.removeFrom(wardcont);
                layer1.removeFrom(container);
                m1.loc(666, 28).sca(0.4)
                marshmallowCounter++;
                checkCompletion();
                S.update();
            });
            
            livingroom.tap(()=>{
            wardrobe.removeFrom();
            wardrobeFrame.removeFrom();
            livingroom.alp(1)
            container.addTo()
            m6.alp(1)
            bgp.alp(1)
            wardcont.removeFrom();
            S.update();

            });

        S.update();
        })

    
        const layer2 = new Pic("Layer 2.png").loc(143, 540).alp(0.01).addTo(container);
        let underFrame 

        layer2.on("click", ()=>{
            const undercont = new Container(460, 530).centerReg(container);
            const under =  new Pic("underbed.png").centerReg(undercont).sca(0.65)
            underFrame = new Rectangle(
            460,
            530,
            null,
            orange,
            1,
            20
            ).centerReg();
            under.setMask(underFrame);
            m6.alp(0.5)
            bgp.alp(0.1)
            livingroom.alp(0.5)

            const m2 = new Pic("m2.png").pos(312, 540).sca(0.2).addTo(undercont); 

            m2.tap(()=>{
                m2.removeFrom(undercont);
                layer2.removeFrom(container);
                m2.loc(716, 28).sca(0.4)
                underFrame.removeFrom()
                marshmallowCounter++;
                checkCompletion();
                S.update();
            });

                livingroom.tap(()=>{
                under.removeFrom();
                underFrame.removeFrom();
                livingroom.alp(1)
                undercont.removeFrom();
                container.addTo();
                m6.alp(1)
                bgp.alp(1)
                S.update();
                });
            // livingroom.on("click", ()=>{
            //     livingroom
            //     S.update();
            // })
                S.update();
            })


        const layer3 = new Pic("Layer 3.png").loc(500, 465).alp(0.01).addTo(container);
        let under2BedFrame

        layer3.on("click", ()=>{
            const under2cont = new Container(460, 530).centerReg(container);
            const under2Bed =  new Pic("underbed2.png").centerReg(under2cont).sca(0.645)
            under2BedFrame = new Rectangle(
            460,
            530,
            null,
            orange,
            1,
            20
            ).centerReg();
            under2Bed.setMask(under2BedFrame);
            m6.alp(0.5)
            bgp.alp(0.1)
            livingroom.alp(0.5);

            const m3 = new Pic("m3.png").pos(710, 365).sca(0.16).addTo(under2cont); 

            m3.tap(()=>{
                m3.removeFrom(under2cont);
                layer3.removeFrom(container);
                m3.loc(776, 28).sca(0.4);
                marshmallowCounter++;
                checkCompletion();
                S.update();
            });


                livingroom.tap(()=>{
                under2Bed.removeFrom();
                under2BedFrame.removeFrom();
                under2cont.removeFrom();
                livingroom.alp(1)
                m6.alp(1)
                bgp.alp(1)
                container.addTo();
                S.update();
                });
           
                S.update();
            })


        const layer4 = new Pic("Layer 4.png").loc(120, 364).alp(0.01).addTo(container);
        let pillowFrame 

        layer4.on("click", ()=>{
            const pillowcont = new Container(460, 530).centerReg(container);
            const pillow =  new Pic("pillow.png").centerReg(pillowcont).sca(0.5, 0.85)
            pillowFrame = new Rectangle(
            460,
            530,
            null,
            orange,
            1,
            20
            ).centerReg();
            pillow.setMask(pillowFrame);
            m6.alp(0.5)
            bgp.alp(0.1)
            livingroom.alp(0.5)

            const m4 = new Pic("m4.png").pos(500, 300).sca(0.25).addTo(pillowcont); 

            m4.tap(()=>{
                m4.removeFrom(pillowcont);
                layer4.removeFrom(container);
                m4.loc(830, 28).sca(0.4);
                marshmallowCounter++;
                checkCompletion();
                S.update();
            });


                livingroom.tap(()=>{
                pillow.removeFrom();
                pillowFrame.removeFrom();
                pillowcont.removeFrom();
                livingroom.alp(1)
                m6.alp(1)
                bgp.alp(1)
                container.addTo();
                S.update();
                });
           
                S.update();
            })

        const layer5 = new Pic("Layer 5.png").loc(548, 336).alp(0.01).addTo(container);
        let drawerBedFrame

        layer5.on("click", ()=>{
            const drawercont = new Container(460, 530).centerReg(container);
            const drawerBed =  new Pic("drawer.png").centerReg(drawercont).sca(0.645)
            drawerBedFrame = new Rectangle(
            460,
            530,
            null,
            orange,
            1,
            20
            ).centerReg();
            drawerBed.setMask(drawerBedFrame);
            m6.alp(0.5)
            bgp.alp(0.1)
            livingroom.alp(0.5);

            const m5 = new Pic("m5.png").pos(500, 120).sca(0.17).addTo(drawercont); 

            m5.tap(()=>{
                m5.removeFrom(drawercont);
                layer5.removeFrom(container);
                m5.loc(896, 28).sca(0.4);
                marshmallowCounter++;
                checkCompletion();
                S.update();
            });


                livingroom.tap(()=>{
                drawerBed.removeFrom();
                drawerBedFrame.removeFrom();
                drawercont.removeFrom();
                livingroom.alp(1)
                m6.alp(1)
                bgp.alp(1)
                container.addTo();
                S.update();
                });
          
                S.update();
            })

    
    const m6 = new Pic("m6.png").pos(790, 150).sca(0.14).addTo(container); 

    m6.tap(()=>{
        m6.removeFrom(container);
        m6.loc(945, 28).sca(0.4).alp(1);
        marshmallowCounter++;
        checkCompletion();
        S.update();
    });




    //let hint = new Rectangle ({width: 80, height: 40, color: darker, corner: 10}).loc(15, 30);
      new Label({
        text: "Click on items in the room and find Marshmallows",
          size: 16,
          color: lighter,
          font: "Tomorrow",
     }).addTo().loc(15, 45)
      

    let livingroom2 = new Pic("bedroom.png").center(container).alp(0).addTo(container);
    

    function checkCompletion() {
    
        if (marshmallowCounter === 6) {
            wardrobeFrame.removeFrom();
            underFrame.removeFrom();
            under2BedFrame.removeFrom();
            pillowFrame.removeFrom();
            drawerBedFrame.removeFrom();

            livingroom2.animate({props:{alpha: 1}, time:0.5}).center(container).addTo(container)

            livingroom2.animate({
                props: { scale: 2 },
                time: 1.5,
                call: nextLevel,
              })
        }
    
    }       

    function nextLevel(){
        const message = new Label({
        text: "Congrats! You have Found All the Marshmallows. Continue to help her escape from the house.",
        size: 24,
        backgroundColor: darker,
        align: CENTER,
        color: white,
        backgroundBorderColor: white,
        backgroundBorderWidth: 1,
        labelWidth: 500,
        corner: 50,
        padding: 30,
        font: "Tomorrow",
        })
        .center()
        .alp(0);

        message.animate({
                props: { alpha: 1 },
                time: 0.33,
                });

                const labels = new Label({
                text: "Continue",
                size: 24,
                color: darker,
                font: "Tomorrow",
                }).centerReg();

                const level3 = new Button({
                label: labels,
                font: 24,
                color: white,
                width: 200,
                backgroundColor: darker,
                rollBackgroundColor: "brown",
                corner: 25,
                borderColor: white,
                borderWidth: 2,
                }).pos(0, 150, CENTER, BOTTOM);
                level3.on("click", () => {
                zgo("hallway.html");
                });
    }

      
      } // end ready
    </script>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
  </head>

  <body></body>
</html>
